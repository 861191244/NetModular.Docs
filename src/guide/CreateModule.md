# 创建模块

想要实现快速创建模块，离不开代码生成器~

大部分代码生成器都是根据数据库的表结构信息来生成项目代码，而本框架的代码生成器有些不一样，它是先设计实体然后生成数据库以及项目代码，这样设计的目的主要是因为当需要开发一个新的模块的时候，团队要聚在一起讨论实体模型，大部分都是采用 Excel 文件或者 Word 文件来记录，讨论完成后发送给各个人员。个人觉得这样不是很友好，每次修改一个实体，都要重新发送最新文件给其他人员。

所以，为了可以方便的查看项目信息和实体信息，便开发了 Web 版的代码生成器，把代码生成器项目部署到公司的内网环境，这样就能随时在线查看修改了~

当然，上面的方式仅适合新项目，如果是已有数据库了，还是要根据数据库来生成项目文件的，不过暂时还没做这个功能，目前代码生成器只能算是 1.0 版本，距离我最终想要的版本还有很大距离，比如可视化拖拽配置前端页面等等，任重而道远~

> [代码生成器](https://github.com/iamoldli/NetModular.Module.CodeGenerator) 是一个独立模块，一般需要安装后才能使用。

示例源码仓库（已经安装了代码生成器模块）：
- github: https://github.com/iamoldli/NetModular.Demo
- gitee: https://gitee.com/laoli/NetModular.Demo

## 1、添加模块

打开模块创建下的模块列表页面，点击添加按钮，填写模块名称、编号、编码、图标等信息

<nm-img id="20190918152255"/>

## 2、添加实体

点击刚刚创建的模块操作中的实体管理按钮

<nm-img id="20190918152725"/>

点击添加按钮

<nm-img id="20190918152831"/>

填写 类名、表名、基类类型和备注

实体基类类型包括

> IEntity 不包含任何属性

> Entity 继承自 IEntity，包含 Id 属性

> EntityBase 继承自 Entity，包含 Id、CreatedBy(创建人)、CreatedTime(创建时间)、ModifiedBy(修改人)、ModifiedTime(修改时间)属性，以及 Creator(创建人名称)、Modifier(修改人名称)两个扩展属性

> EntityWithSoftDelete 继承自 IEntity，包含 Id、Deleted(已删除)、DeletedTime(删除时间)、DeletedBy(删除人编号)属性，以及 Deleter(删除人)扩展属性

> EntityBaseWithSoftDelete 继承自 EntityWithSoftDelete，除了包含软删除的属性外，还包含了 EntityBase 的属性

::: warning 注意

以上实体基类类型，除了 IEntity 以外，全部支持四种主键类型：Int、Long、Guid、String

:::

基础方法可以选择生成代码时，需要生成哪些方法，保存~

## 3、添加属性

点击刚刚添加的 Article 实体名称，配置实体的属性

<nm-img id="20190918154356"/>

创建实体的时候，会默认创建实体基类的属性信息，会有一个星号标注，这些属性是无法修改编辑的~

点击添加按钮添加属性，填写对应信息即可~

<nm-img id="20190918154625" />

::: warning 注意

#### Note

如果属性时枚举类型，需要先添加枚举，然后再添加属性的时候类型选择枚举并绑定

:::

## 4、配置实体模型

返回实体列表，选择刚刚添加的 Article 实体，点击模型按钮

<nm-img id="20190918155141" />

目前包括三种模型，查询、添加、修改，模型的属性可以手动添加，也可以从实体中导入

<nm-img id="20190918155254" />

## 5、生成

当把需要的实体和属性配置完成后，返回项目列表，点击生成代码，会自动生成并下载代码文件，生成代码时会自动查询依赖的 NuGet 包的最新版本号，此操作较耗时，所以可能会有点慢，请耐心等待~

加压后目录结构如下：

<nm-img id="20190918155614" />

里面已经包含了数据库文件以及前后端代码

## 6、运行

剩下的与 [快速启动](./GetingStart.html)里面的操作是一样的~

## 7、配置菜单

默认每个实体都会生成一个页面，需要自己先配置菜单，然后给角色绑定菜单才可以访问~
